@page
@using Microsoft.EntityFrameworkCore
@using ProjectPractical.Data
@inject ApplicationDbContext Context

<h1>Тест базы данных</h1>

@{
    try
    {
        var products = await Context.Products.ToListAsync();
        var users = await Context.Users.ToListAsync();

        <div class="alert alert-success">
            <h4>✅ База подключена успешно!</h4>
            <p>Продуктов: @products.Count</p>
            <p>Пользователей: @users.Count</p>
        </div>

        <h3>Продукты:</h3>
        <ul>
            @foreach (var p in products)
            {
                <li>@p.Name - @p.Price ₽</li>
            }
        </ul>
    }
    catch (Exception ex)
    {
        <div class="alert alert-danger">
            <h4>❌ Ошибка подключения к базе:</h4>
            <p>@ex.Message</p>
        </div>
    }
}